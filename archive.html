<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Service Archive - Executive Laundry Verdant</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .archive-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .archive-header {
      background: rgba(35, 42, 52, 0.85);
      padding: 32px 28px;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
      color: #e0e6ed;
      text-align: center;
      margin-bottom: 30px;
    }

    .archive-controls {
      background: rgba(35, 42, 52, 0.85);
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
      margin-bottom: 30px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: center;
      justify-content: space-between;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .control-group label {
      color: #e0e6ed;
      font-weight: 500;
    }

    .control-group input, .control-group select {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #3a4250;
      background: #181c24;
      color: #e0e6ed;
      min-width: 150px;
    }

    .archive-table {
      background: rgba(35, 42, 52, 0.85);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
    }

    .archive-table table {
      width: 100%;
      border-collapse: collapse;
    }

    .archive-table th {
      background: #2d3e50;
      color: #e0e6ed;
      padding: 16px;
      text-align: left;
      font-weight: 600;
    }

    .archive-table td {
      padding: 16px;
      border-bottom: 1px solid #3a4250;
      color: #e0e6ed;
    }

    .archive-table tr:hover {
      background: rgba(76, 175, 80, 0.1);
    }

    .status-badge {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
    }

    .status-completed { background: rgba(76, 175, 80, 0.2); color: #4caf50; }
    .status-cancelled { background: rgba(244, 67, 54, 0.2); color: #f44336; }
    .status-pending { background: rgba(255, 152, 0, 0.2); color: #ff9800; }

    .archive-info {
      background: rgba(45, 62, 80, 0.8);
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      color: #e0e6ed;
    }

    .archive-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(35, 42, 52, 0.85);
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border-left: 4px solid #4caf50;
    }

    .stat-number {
      font-size: 2em;
      font-weight: bold;
      color: #4caf50;
      margin-bottom: 8px;
    }

    .stat-label {
      color: #e0e6ed;
      font-size: 0.9em;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: #e0e6ed;
    }

    .no-data {
      text-align: center;
      padding: 40px;
      color: #bfc9d1;
    }

    .archive-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      text-decoration: none;
      display: inline-block;
      transition: background-color 0.3s ease;
    }

    .btn-primary {
      background: #4caf50;
      color: white;
    }

    .btn-primary:hover {
      background: #45a049;
    }

    .btn-secondary {
      background: #2d3e50;
      color: #e0e6ed;
    }

    .btn-secondary:hover {
      background: #34495e;
    }

    @media (max-width: 768px) {
      .archive-controls {
        flex-direction: column;
        align-items: stretch;
      }

      .control-group {
        width: 100%;
      }

      .archive-actions {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Service Archive</h1>
      <div class="header-actions">
        <a href="index.html" class="home-button">Home</a>
        <a href="past-services.html" class="home-button">Active Services</a>
      </div>
    </div>
  </header>

  <main class="archive-container">
    <div class="archive-header">
      <h2>Service Request Archive</h2>
      <p>Access your complete service history including archived orders. All your past laundry services are preserved here for your records.</p>
    </div>

    <div class="archive-info">
      <h3>ðŸ“¦ Archive Information</h3>
      <p>The archive contains service requests older than 1 year that have been moved from the active system for optimal performance. All data is preserved and accessible.</p>
    </div>

    <div class="archive-stats">
      <div class="stat-card">
        <div class="stat-number" id="totalArchived">0</div>
        <div class="stat-label">Total Archived Orders</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalSpent">â‚±0</div>
        <div class="stat-label">Total Amount Spent</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="oldestOrder">-</div>
        <div class="stat-label">Oldest Order Date</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="newestOrder">-</div>
        <div class="stat-label">Newest Order Date</div>
      </div>
    </div>

    <div class="archive-controls">
      <div class="control-group">
        <label for="dateFrom">From Date</label>
        <input type="date" id="dateFrom" />
      </div>
      <div class="control-group">
        <label for="dateTo">To Date</label>
        <input type="date" id="dateTo" />
      </div>
      <div class="control-group">
        <label for="statusFilter">Status</label>
        <select id="statusFilter">
          <option value="">All Statuses</option>
          <option value="Completed">Completed</option>
          <option value="Cancelled">Cancelled</option>
          <option value="Pending">Pending</option>
        </select>
      </div>
      <div class="control-group">
        <label for="serviceFilter">Service Type</label>
        <select id="serviceFilter">
          <option value="">All Services</option>
          <option value="Wash & Fold">Wash & Fold</option>
          <option value="Dry Cleaning">Dry Cleaning</option>
          <option value="Ironing">Ironing</option>
        </select>
      </div>
      <div class="archive-actions">
        <button class="btn btn-primary" onclick="loadArchiveData()">Load Archive</button>
        <button class="btn btn-secondary" onclick="clearFilters()">Clear Filters</button>
        <button class="btn btn-secondary" onclick="exportData()">Export CSV</button>
      </div>
    </div>

    <div class="archive-table">
      <table id="archiveTable">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Date</th>
            <th>Service</th>
            <th>Status</th>
            <th>Amount</th>
            <th>Pickup Date</th>
            <th>Delivery Date</th>
            <th>Archived Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="archiveTableBody">
          <tr>
            <td colspan="9" class="loading">Click "Load Archive" to view your archived service requests</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div id="pagination" style="text-align: center; margin-top: 20px; display: none;">
      <button class="btn btn-secondary" onclick="previousPage()" id="prevBtn" disabled>Previous</button>
      <span id="pageInfo" style="color: #e0e6ed; margin: 0 20px;">Page 1 of 1</span>
      <button class="btn btn-secondary" onclick="nextPage()" id="nextBtn" disabled>Next</button>
    </div>
  </main>

  <footer>
    &copy; 2025 Company Name. All rights reserved.
  </footer>

  <script>
    let archiveData = [];
    let filteredData = [];
    let currentPage = 1;
    const itemsPerPage = 10;

    function loadArchiveData() {
      const loadingRow = document.querySelector('#archiveTableBody .loading');
      if (loadingRow) {
        loadingRow.innerHTML = '<td colspan="9" class="loading">Loading archived data...</td>';
      }

      setTimeout(() => {
        loadSampleArchiveData();
        applyFilters();
        updateStats();
        displayData();
      }, 1000);
    }

    function loadSampleArchiveData() {
      archiveData = [
        {
          orderId: 'ARCH-2023-001',
          date: '2023-12-15',
          service: 'Wash & Fold',
          status: 'Completed',
          amount: 'â‚±150.00',
          pickupDate: '2023-12-13',
          deliveryDate: '2023-12-15',
          archivedDate: '2024-01-15',
          items: '3 shirts, 2 pants, 1 jacket'
        },
        {
          orderId: 'ARCH-2023-002',
          date: '2023-11-28',
          service: 'Dry Cleaning',
          status: 'Completed',
          amount: 'â‚±220.00',
          pickupDate: '2023-11-26',
          deliveryDate: '2023-11-28',
          archivedDate: '2024-01-15',
          items: '2 suits, 1 dress, 3 shirts'
        },
        {
          orderId: 'ARCH-2023-003',
          date: '2023-11-10',
          service: 'Ironing',
          status: 'Completed',
          amount: 'â‚±100.00',
          pickupDate: '2023-11-09',
          deliveryDate: '2023-11-10',
          archivedDate: '2024-01-15',
          items: '5 shirts, 2 blouses'
        },
        {
          orderId: 'ARCH-2023-004',
          date: '2023-10-22',
          service: 'Wash & Fold',
          status: 'Cancelled',
          amount: 'â‚±0.00',
          pickupDate: '2023-10-20',
          deliveryDate: 'N/A',
          archivedDate: '2024-01-15',
          items: 'Order cancelled before processing'
        },
        {
          orderId: 'ARCH-2023-005',
          date: '2023-09-18',
          service: 'Dry Cleaning',
          status: 'Completed',
          amount: 'â‚±180.00',
          pickupDate: '2023-09-16',
          deliveryDate: '2023-09-18',
          archivedDate: '2024-01-15',
          items: '1 coat, 2 dresses'
        },
        {
          orderId: 'ARCH-2023-006',
          date: '2023-08-30',
          service: 'Wash & Fold',
          status: 'Completed',
          amount: 'â‚±200.00',
          pickupDate: '2023-08-28',
          deliveryDate: '2023-08-30',
          archivedDate: '2024-01-15',
          items: '4 shirts, 3 pants, 2 shorts'
        },
        {
          orderId: 'ARCH-2023-007',
          date: '2023-07-14',
          service: 'Ironing',
          status: 'Completed',
          amount: 'â‚±85.00',
          pickupDate: '2023-07-12',
          deliveryDate: '2023-07-14',
          archivedDate: '2024-01-15',
          items: '6 shirts, 1 tablecloth'
        },
        {
          orderId: 'ARCH-2023-008',
          date: '2023-06-05',
          service: 'Dry Cleaning',
          status: 'Completed',
          amount: 'â‚±165.00',
          pickupDate: '2023-06-03',
          deliveryDate: '2023-06-05',
          archivedDate: '2024-01-15',
          items: '1 suit, 3 blouses'
        }
      ];
    }

    function applyFilters() {
      const dateFrom = document.getElementById('dateFrom').value;
      const dateTo = document.getElementById('dateTo').value;
      const statusFilter = document.getElementById('statusFilter').value;
      const serviceFilter = document.getElementById('serviceFilter').value;

      filteredData = archiveData.filter(item => {
        const itemDate = new Date(item.date);
        const fromDate = dateFrom ? new Date(dateFrom) : null;
        const toDate = dateTo ? new Date(dateTo) : null;

        if (fromDate && itemDate < fromDate) return false;
        if (toDate && itemDate > toDate) return false;
        if (statusFilter && item.status !== statusFilter) return false;
        if (serviceFilter && item.service !== serviceFilter) return false;

        return true;
      });

      currentPage = 1;
    }

    function updateStats() {
      const totalArchived = filteredData.length;
      const totalSpent = filteredData
        .filter(item => item.status === 'Completed')
        .reduce((sum, item) => sum + parseFloat(item.amount.replace('â‚±', '').replace(',', '')), 0);

      const dates = filteredData.map(item => new Date(item.date)).filter(date => !isNaN(date));
      const oldestDate = dates.length > 0 ? new Date(Math.min(...dates)) : null;
      const newestDate = dates.length > 0 ? new Date(Math.max(...dates)) : null;

      document.getElementById('totalArchived').textContent = totalArchived;
      document.getElementById('totalSpent').textContent = `â‚±${totalSpent.toFixed(2)}`;
      document.getElementById('oldestOrder').textContent = oldestDate ?
        oldestDate.toLocaleDateString() : '-';
      document.getElementById('newestOrder').textContent = newestDate ?
        newestDate.toLocaleDateString() : '-';
    }

    function displayData() {
      const tableBody = document.getElementById('archiveTableBody');
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const pageData = filteredData.slice(startIndex, endIndex);

      if (pageData.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="9" class="no-data">No archived orders found matching your criteria.</td></tr>';
        document.getElementById('pagination').style.display = 'none';
        return;
      }

      tableBody.innerHTML = pageData.map(item => `
        <tr>
          <td>${item.orderId}</td>
          <td>${item.date}</td>
          <td>${item.service}</td>
          <td><span class="status-badge status-${item.status.toLowerCase()}">${item.status}</span></td>
          <td>${item.amount}</td>
          <td>${item.pickupDate}</td>
          <td>${item.deliveryDate}</td>
          <td>${item.archivedDate}</td>
          <td>
            <button class="btn btn-secondary" onclick="viewDetails('${item.orderId}')">Details</button>
          </td>
        </tr>
      `).join('');

      updatePagination();
    }

    function updatePagination() {
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);
      const pagination = document.getElementById('pagination');
      const pageInfo = document.getElementById('pageInfo');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      if (totalPages > 1) {
        pagination.style.display = 'block';
        pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
      } else {
        pagination.style.display = 'none';
      }
    }

    function nextPage() {
      if (currentPage < Math.ceil(filteredData.length / itemsPerPage)) {
        currentPage++;
        displayData();
      }
    }

    function previousPage() {
      if (currentPage > 1) {
        currentPage--;
        displayData();
      }
    }

    function clearFilters() {
      document.getElementById('dateFrom').value = '';
      document.getElementById('dateTo').value = '';
      document.getElementById('statusFilter').value = '';
      document.getElementById('serviceFilter').value = '';
      applyFilters();
      updateStats();
      displayData();
    }

    function exportData() {
      if (filteredData.length === 0) {
        alert('No data to export. Please load archive data first.');
        return;
      }

      const csvContent = [
        ['Order ID', 'Date', 'Service', 'Status', 'Amount', 'Pickup Date', 'Delivery Date', 'Archived Date', 'Items'].join(','),
        ...filteredData.map(item => [
          item.orderId,
          item.date,
          item.service,
          item.status,
          item.amount,
          item.pickupDate,
          item.deliveryDate,
          item.archivedDate,
          `"${item.items}"`
        ].join(','))
      ].join('\n');

      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `laundry-archive-${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      window.URL.revokeObjectURL(url);
    }

    function viewDetails(orderId) {
      const item = filteredData.find(item => item.orderId === orderId);
      if (item) {
        alert(`Order Details:\n\nOrder ID: ${item.orderId}\nService: ${item.service}\nItems: ${item.items}\nAmount: ${item.amount}\nStatus: ${item.status}`);
      }
    }

    // Set default date range (last 2 years)
    const today = new Date();
    const twoYearsAgo = new Date(today.getFullYear() - 2, today.getMonth(), today.getDate());
    document.getElementById('dateFrom').value = twoYearsAgo.toISOString().split('T')[0];
    document.getElementById('dateTo').value = today.toISOString().split('T')[0];
  </script>
</body>
</html>
